version: 2

sources:
  - name: erp
    database: FEA25_05
    schema: RAW_ADVENTURE_WORKS
    tables:
      - name: SALES_CUSTOMER
        description: "Clientes registrados na base de vendas"
        columns:
          - name: CustomerID
            description: "Identificador único do cliente"
            data_tests: [unique, not_null]
          - name: PersonID
            description: "Referência à pessoa física ou jurídica"
          - name: StoreID
            description: "Loja vinculada ao cliente"
          - name: TerritoryID
            description: "Território atribuído ao cliente"

      - name: PRODUCTION_PRODUCT
        description: "Tabela mestre de produtos fabricados"
        columns:
          - name: ProductID
            description: "Identificador único do produto"
            data_tests: [unique, not_null]
          - name: Name
            description: "Nome do produto"
          - name: ProductSubcategoryID
            description: "Subcategoria do produto"
          - name: ProductModelID
            description: "Modelo técnico do produto"

      - name: PRODUCTION_PRODUCTSUBCATEGORY
        description: "Subcategorias de produtos disponíveis"
        columns:
          - name: ProductSubcategoryID
            description: "Identificador único da subcategoria"
            data_tests: [unique, not_null]
          - name: Name
            description: "Nome da subcategoria"
          - name: ProductCategoryID
            description: "Chave que conecta à categoria do produto"
            data_tests: [not_null]

      - name: PRODUCTION_PRODUCTCATEGORY
        description: "Categorias principais dos produtos fabricados"
        columns:
          - name: ProductCategoryID
            description: "Identificador único da categoria"
            data_tests: [unique, not_null]
          - name: Name
            description: "Nome da categoria"

      - name: SALES_SALESPERSON
        description: "Informações dos vendedores"
        columns:
          - name: BusinessEntityID
            description: "ID único do vendedor"
            data_tests: [unique, not_null]
          - name: TerritoryID
            description: "Território em que atua"
          - name: Bonus
            description: "Valor de bônus concedido"

      - name: SALES_SALESORDERHEADER
        description: "Pedidos realizados pelos clientes"
        columns:
          - name: SalesOrderID
            description: "Código do pedido de venda"
            data_tests: [unique, not_null]
          - name: CustomerID
            description: "Cliente responsável pelo pedido"
            data_tests: [not_null]
          - name: OrderDate
            description: "Data em que a ordem foi realizada"
          - name: SubTotal
            description: "Valor bruto da venda"
          - name: TotalDue
            description: "Valor total da venda com encargos"
          - name: Status
            description: "Situação atual do pedido"

      - name: SALES_SALESORDERHEADERSALESREASON
        description: "Relação entre pedidos e seus motivos comerciais"

      - name: SALES_SALESREASON
        description: "Motivos atribuídos às vendas"
        columns:
          - name: SalesReasonID
            description: "ID do motivo comercial"
            data_tests: [unique, not_null]
          - name: Name
            description: "Descrição do motivo"

      - name: SALES_CREDITCARD
        description: "Cartões de crédito utilizados nos pedidos"
        columns:
          - name: CreditCardID
            description: "Identificador único do cartão"
            data_tests: [unique, not_null]

      - name: PERSON_ADDRESS
        description: "Endereços registrados para os clientes"
        columns:
          - name: AddressID
            description: "ID do endereço"
            data_tests: [unique, not_null]
          - name: AddressLine1
            description: "Endereço principal"
          - name: City
            description: "Cidade"

      - name: PERSON_STATEPROVINCE
        description: "Provincias vinculadas aos endereços"
        columns:
          - name: StateProvinceID
            description: "ID da província"
            data_tests: [unique, not_null]
          - name: Name
            description: "Nome da província"
          - name: CountryRegionCode
            description: "Código do país"

      - name: PERSON_COUNTRYREGION
        description: "Países vinculados aos estados e endereços"
        columns:
          - name: CountryRegionCode
            description: "Código único do país"
            data_tests: [unique, not_null]
          - name: Name
            description: "Nome do país"

models:
  - name: stg_erp__clientes
    description: "Clientes registrados, incluindo loja, pessoa e território"
    columns:
      - name: id_cliente
        data_tests: [unique, not_null]

  - name: stg_erp__produtos
    description: "Produtos fabricados com modelo e subcategoria"
    columns:
      - name: id_produto
        data_tests: [unique, not_null]

  - name: stg_erp__subcategorias
    description: "Subcategorias vinculadas aos produtos"
    columns:
      - name: id_subcategoria
        data_tests: [unique, not_null]

  - name: stg_erp__categorias
    description: "Categorias principais dos produtos"
    columns:
      - name: id_categoria
        data_tests: [unique, not_null]

  - name: stg_erp__vendedores
    description: "Informações sobre vendedores e território"
    columns:
      - name: id_vendedor
        data_tests: [unique, not_null]

  - name: stg_erp__pedidos
    description: "Pedidos realizados, com valores e status"
    columns:
      - name: id_pedido
        data_tests: [unique, not_null]

  - name: stg_erp__motivos
    description: "Motivos atribuídos às vendas"
    columns:
      - name: id_motivo
        data_tests: [unique, not_null]

  - name: stg_erp__motivos_pedido
    description: "Ligação entre pedidos e motivos comerciais"
    columns:
      - name: id_pedido
        data_tests: [not_null]
      - name: id_motivo
        data_tests: [not_null]

  - name: stg_erp__cartoes
    description: "Cartões de crédito utilizados nos pedidos"
    columns:
      - name: id_cartao
        data_tests: [unique, not_null]

  - name: stg_erp__enderecos
    description: "Endereços vinculados aos clientes"
    columns:
      - name: id_endereco
        data_tests: [unique, not_null]

  - name: stg_erp__provincia
    description: "Dados das províncias e seus códigos de país"
    columns:
      - name: id_provincia
        data_tests: [unique, not_null]

  - name: stg_erp__pais
    description: "Países registrados na base geográfica"
    columns:
      - name: codigo_pais
        data_tests: [unique, not_null]
  
  - name: stg_erp__categorias
    description: "Categorias principais dos produtos"
    columns:
    - name: id_categoria
      description: "Identificador único da categoria"
      tests: [not_null, unique]
    - name: nome_categoria
      description: "Nome da categoria"
      tests: [not_null]

